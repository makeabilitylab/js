function t(t){return t*(180/Math.PI)}function e(t,e,s){return(1-s)*t+s*e}function s(t,s,n){t=i(t),s=i(s);return`rgba(${Math.round(e(t.r,s.r,n))}, ${Math.round(e(t.g,s.g,n))}, ${Math.round(e(t.b,s.b,n))}, ${e(t.a||1,s.a||1,n)})`}function i(t){if("string"==typeof t){const e=t.match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3}|[0-9a-fA-F]{8})$/);if(e){const t=e[1];return 8===t.length?{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:parseInt(t.substring(6,8),16)/255}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:1}}if(t.startsWith("rgb")){const e=t.match(/rgba?\((\d+), (\d+), (\d+)(?:, (\d?\.\d+))?\)/);if(e){const[,t,s,i,n]=e;return{r:parseInt(t),g:parseInt(s),b:parseInt(i),a:void 0!==n?parseFloat(n):1}}}throw new Error(`Invalid color string: ${t}`)}return t}class n{constructor(t,e){this.x=t,this.y=e}add(t){return new n(this.x+t.x,this.y+t.y)}subtract(t){return new n(this.x-t.x,this.y-t.y)}multiply(t){return new n(this.x*t,this.y*t)}divide(t){return new n(this.x/t,this.y/t)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){const t=this.magnitude();return new n(this.x/t,this.y/t)}dotProduct(t){return this.x*t.x+this.y*t.y}angleBetween(t){const e=this.dotProduct(t),s=this.magnitude()*t.magnitude();if(Math.abs(e-s)<Number.EPSILON)return e>=0?0:Math.PI;if(0===s)return 0;const i=e/s;let n=Math.acos(i);return this.x*t.y-this.y*t.x<0&&(n=2*Math.PI-n),n}toString(){return`(${this.x}, ${this.y})`}static fromPoints(t,e){return new n(e.x-t.x,e.y-t.y)}}class r{constructor(t,e,s,i){2==arguments.length&&"object"==typeof t&&"object"==typeof e?(this.pt1=t,this.pt2=e):(this.pt1=new n(t,e),this.pt2=new n(s,i)),this.fontSize=10,this.strokeColor="black",this.isDashedLine=!1,this.drawTextLabels=!0,this.drawTextMagnitude=!0,this.drawTextAngle=!0,this.strokeWeight=2}get x1(){return this.pt1.x}set x1(t){this.pt1.x=t}get y1(){return this.pt1.y}set y1(t){this.pt1.y=t}get x2(){return this.pt2.x}set x2(t){this.pt2.x=t}get y2(){return this.pt2.y}set y2(t){this.pt2.y=t}getHeading(){const t=this.pt2.subtract(this.pt1);let e=Math.atan2(t.y,t.x);return e<0&&(e+=2*Math.PI),e}getNormals(){return function(t,e){const s=e.subtract(t);return[new n(s.y,-s.x),new n(-s.y,s.x)]}(this.pt1,this.pt2)}getNormal(){return this.getNormals()[0]}getVectorAtOrigin(){return this.pt2.subtract(this.pt1)}getAnglesBetween(e){const s=this.getVectorAtOrigin();let i;i=e instanceof r?e.getVectorAtOrigin():e;let n=s.angleBetween(i);console.log(`angleBetweenDegrees: ${t(n).toFixed(1)}`),n<0&&(n+=2*Math.PI);const a=n;return{counterclockwiseAngle:2*Math.PI-n,clockwiseAngle:a}}getOrthogonalProjection(t){const e=this.pt2.subtract(this.pt1),s=t.subtract(this.pt1),i=e.magnitude(),n=Math.min(Math.max(s.dotProduct(e.normalize()),0),i);return this.pt1.add(e.multiply(n))}getDistance(t){const e=this.getOrthogonalProjection(t);return t.subtract(e).magnitude()}getMagnitude(){return this.pt2.subtract(this.pt1).magnitude()}setMagnitude(t){const e=this.pt2.subtract(this.pt1).normalize().multiply(t);this.pt2=this.pt1.add(e)}draw(t){if(t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWeight,this.isDashedLine&&t.setLineDash([5,15]),this.drawArrow(t,this.pt1,this.pt2.subtract(this.pt1),this.strokeColor),this.drawTextLabels){t.font=`${this.fontSize}px Arial`,t.textAlign="left",t.textBaseline="top",t.fillStyle=this.strokeColor;const e=this.generateLabel(),s=t.measureText(e).width;t.fillText(e,-s-3,12)}}drawArrow(t,e,s,i){const n=10,r=Math.atan2(s.y,s.x);t.save(),t.strokeStyle=i,t.fillStyle=i,t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(e.x+s.x,e.y+s.y),t.stroke(),t.beginPath(),t.moveTo(e.x+s.x,e.y+s.y),t.lineTo(e.x+s.x-n*Math.cos(r-Math.PI/6),e.y+s.y-n*Math.sin(r-Math.PI/6)),t.lineTo(e.x+s.x-n*Math.cos(r+Math.PI/6),e.y+s.y-n*Math.sin(r+Math.PI/6)),t.lineTo(e.x+s.x,e.y+s.y),t.lineTo(e.x+s.x-n*Math.cos(r-Math.PI/6),e.y+s.y-n*Math.sin(r-Math.PI/6)),t.stroke(),t.fill(),t.restore()}generateLabel(){let t="";if(this.drawTextAngle){t+=`${Math.round(180*Math.atan2(this.pt2.y-this.pt1.y,this.pt2.x-this.pt1.x)/Math.PI)}°`}return this.drawTextAngle&&this.drawTextMagnitude&&(t+=" "),this.drawTextMagnitude&&(t+=`|${this.getMagnitude().toFixed(1)}|`),t}static drawAngleArcs(e,s,i,r="blue",a="red",o=50,h=30){const l=s.getHeading(),c=s.getAnglesBetween(i);console.log(`CW angle ${t(c.clockwiseAngle).toFixed(1)} CCW angle ${t(c.counterclockwiseAngle).toFixed(1)}`),e.save(),e.beginPath(),e.arc(s.pt1.x,s.pt1.y,o,l,l+c.clockwiseAngle,!1),e.strokeStyle=r,e.stroke();const g=new n(s.pt1.x+1.35*o*Math.cos(l+c.clockwiseAngle/2),s.pt1.y+1.35*o*Math.sin(l+c.clockwiseAngle/2));e.font="12px Arial",e.textAlign="center",e.textBaseline="middle",e.fillStyle=r;const u=`${t(c.clockwiseAngle).toFixed(1)}°`;e.fillText(u,g.x,g.y),e.beginPath(),e.arc(s.pt1.x,s.pt1.y,h,l,l-c.counterclockwiseAngle,!0),e.strokeStyle=a,e.stroke();const x=new n(s.pt1.x+1.5*h*Math.cos(l-c.counterclockwiseAngle/2),s.pt1.y+1.5*h*Math.sin(l-c.counterclockwiseAngle/2)),d=`${t(c.counterclockwiseAngle).toFixed(1)}°`;e.fillStyle=a,e.fillText(d,x.x,x.y),e.restore()}}export{r as LineSegment,i as convertColorStringToObject,s as lerpColor};
